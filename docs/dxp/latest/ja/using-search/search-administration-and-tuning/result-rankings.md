# 結果ランキング

> **サブスクライバー**

結果ランキングは、特定のキーワードに対して返される結果のリストを変更するためのものです。

結果ランキングを使用すると、次のことができます

  - 結果リストの一番上に固定する結果を指定する。
  - 検索の特定の結果を非表示にする。
  - 特定のキーワードでは通常は返されない結果を追加する。
  - ドラッグアンドドロップインターフェイスを使用して、固定された結果を並べ替える。

<!-- end list -->

```{note}
Result Rankings affect only searches using the newer search widgets (Search Bar, Search Results, etc.). The rankings you customize do not apply to the legacy Search portlet results or to the individual application search bars.
```

## 要件と制限事項

結果ランキングは、Elasticsearchを検索エンジンとして使用している場合にのみサポートされます。 Elasticsearchのインストールについては、[Getting Started with Elasticsearch](../installing-and-upgrading-a-search-engine/elasticsearch/getting-started-with-elasticsearch.md)を参照してください。

既存のランキングエントリの名前を変更することはできません。 名前を変更するには、別の名前でランキングを再作成する必要があります。 詳細については、 [LPS-96357](https://issues.liferay.com/browse/LPS-96357) を参照してください。

## 結果ランキングの作成と管理

新しい結果ランキングを作成するには、

1.  グローバルメニュー（![Global Menu](../../images/icon-applications-menu.png)）から、*[Applications]* → *[検索の調整]* → *[結果ランキング]* に移動します。

    ![グローバルメニューの[結果ランキング]セクションに移動します](result-rankings/images/01.png)

2.  追加アイコン（![Click on the add icon](../../images/icon-add.png)）をクリックして、新しい結果ランキングを追加します。

3.  使用するキーワードまたはフレーズを入力します。 *[結果をカスタマイズ]* をクリックします。

4.  検索クエリが実行され、結果が表示されます。

    結果ランキングは、[エイリアス]フィールドに単語やフレーズを追加することで、追加のキーワードに適用できます。 *[Enter]* をクリックするか、カンマを使用して追加のエイリアスを入力します。

    ![[エイリアス]フィールドにキーワードを追加します。](result-rankings/images/02.png)

    キーワードの横にある*[X]* をクリックして、エイリアスを削除します。

5.  特定の結果を固定するには、*オプション*アイコン（![Click on the options icon.](../../images/icon-options.png)）をクリックし、*[結果を固定]* をクリックします。 結果の上にマウスを置いて、固定アイコンをクリックすることもできます。

    ![結果を固定リンクをクリックします。](result-rankings/images/03.png)

    複数の結果が固定されたら、固定された結果を並べ替えることができます。 並び替えるアイテムの左端にカーソルを移動します。 アイテムをクリックしたまま、結果リストの上下にドラッグします。

    ![固定された結果の左端をつかみ、上下にドラッグします。](result-rankings/images/04.png)

    ドラッグすると、選択したアイテムが移動可能な長方形のボックスとして表示されます。 ハイライト表示された青い線は、アイテムの挿入ポイントを示しています。

6.  特定の結果を非表示にするには、*オプション*（![Click on the options icon.](../../images/icon-options.png)）→ *[結果を非表示]* をクリックします。 結果の上にマウスを置いて、[結果を非表示]アイコンをクリックすることもできます。

    ![結果を非表示リンクをクリックします。](result-rankings/images/03.png)

    非表示の結果のリストは、結果の*[非表示]* タブをクリックすると表示されます。 非表示の結果を再度表示するには、*オプション*（![Click on the options icon.](../../images/icon-options.png)）→ *[結果を表示]* をクリックします。 結果の上にマウスを置いて、[結果を表示]アイコンをクリックすることもできます。

7.  結果を追加するには、*[結果を追加]* をクリックします。 新しいウィンドウで、他の検索用語を使用して追加の結果を見つけます。 追加する結果にチェックマークを付け、*[Add]* ボタンをクリックします。

    ![追加の結果を検索し、追加する結果にチェックマークを付けます。](result-rankings/images/05.png)

    結果のリストには、先ほど追加した結果が表示されています。

8.  結果ランキングの設定を完了し、*[保存]* をクリックします。

9.  必要に応じて、特定の結果ランキングを無効にすることもできます。 *オプション*（![Click on the options icon.](../../images/icon-options.png)）→*[無効にする]* の順にクリックします。

![検索クエリを無効にするには、[無効にする]をクリックします。](result-rankings/images/06.png)

結果ランキングを再度有効にするには、*オプション*（![Click on the options icon.](../../images/icon-options.png)）→ *[有効にする]* をクリックします。

結果ランキングを完全に削除する場合は、*オプション*（![Click on the options icon.](../../images/icon-options.png)）→ *[Delete]* をクリックします。

## 結果ランキングのスコープと権限

結果ランキングの設定は仮想インスタンススコープで行われるため、注意すべきスコープと権限の動作があります。

固定した結果のスコープは無視されます。 *すべて*を検索する場合とは対照的に、検索バーのスコープが*[このサイト]* に設定されている場合でも、サイトAに存在する固定された結果はサイトBからの検索に常に表示されます。

結果ランキングからの検索はグローバルです。 結果ランキングの管理画面で結果を検索すると、すべてのサイトから関連する結果が返されます。

権限は通常どおり適用されます。 ユーザーにアセットを表示する権限がない場合、アセットを固定しても、そのユーザーの検索結果には表示されません。

## 結果ランキングエイリアスと同義語セットの比較

結果ランキングと同義語セットの類似性により、混乱が生じる可能性があります。 [同義語セット](./synonym-sets.md)は、追加の（同義）キーワードに一致する結果を含むように検索を拡張するため、同義語に一致するものがある場合は、より多くの結果が返されることに注意してください。

結果ランキングは、特定のランキング介入も適用されているキーワードです。 検索されたキーワードのみが結果に照合され、その後、固定、非表示、並べ替え、および追加の結果が有効になります。 もちろん、設定した結果ランキングと同じ検索用語のセットを含む同義語セットを追加すると、その機能を一緒に使用できます。 すべての同義語は同じ結果セットを返し、カスタマイズされたランキングが一番上に適用されます。
