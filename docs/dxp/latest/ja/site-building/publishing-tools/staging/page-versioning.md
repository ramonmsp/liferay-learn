# ページバージョニング

ページバージョニングを有効にすると、あなたとあなたのチームは、サイトのページとページセットの複数のバージョンで並行して作業できます。 これらの異なるバージョンは*バリエーション*と呼ばれ、ステージングバーを介してウィジェットページ用に作成および管理できます。 ページバージョニングでは履歴も保持されており、必要に応じて、ステージングされたページに加えられた変更を以前のバージョンに戻すことができます。

プライベートページとパブリックページのページバージョニングは、最初のステージング設定時に有効にすることができ、その後も*[ステージング設定]* ページからいつでも有効にできます。 有効にすると、個々のページまたはページセットのバリエーションを作成、マージ、および公開できます。 さまざまなユーザーロールのバリエーション権限を管理することもできます。

  - [バリエーションの種類](#types-of-variations)
  - [バリエーションの作成](#creating-variations)
  - [バリエーションのマージ](#merging-variations)
  - [バリエーション権限の管理](#managing-variation-permissions)

## バリエーションの種類

ページセットの*ページバージョニング*を有効にすると、各ウィジェットページのステージングバーで2種類のバリエーションを作成および管理できます。

  - **サイトページバリエーション**：サイトのページセットのこれらのバリエーションを使用して、複数のページを1つのセットとしてまとめながら変更できます。

  - **ページバリエーション**：ページセットバリエーション内に存在する単一ページバリエーション。

ステージングサイトのすべてのバリエーションが同じコンテンツを共有するため、両方のバリエーションタイプはページにのみ影響し、サイトのコンテンツには影響しません。 しかし、各バリエーションでは、同じコンテンツやアプリケーションを異なる方法で使用・構成することができ、ページセットの各バリエーションでは、異なるページを持つことができます。

ただし、ページの*レイアウトタイプ*または*フレンドリURL*を変更すると、すべてのサイトページバリエーションに影響します。 たとえば、ページのテンプレートが変更された場合、それらの変更は、テンプレートから変更を継承するように設定されたページにプロパゲートされます。

```{note}
Page templates are not recognized by the Staging framework. This means that existing Page templates are not viewable or editable on a staged Site. If they're created on a staged Site, they are lost if staging is disabled.
```

## バリエーションの作成

次の手順に従って、ページまたはページセットの新しいバリエーションを作成します。

1.  ステージング バーの*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックし、*[サイトページバリエーション]* または*[ページバリエーション]* を選択します。

    ![ステージングバーのアクションボタンをクリックして、作成するバリエーションタイプを選択します。](./page-versioning/images/03.png)

2.  モーダルウィンドウの右下にある*[Add]* ボタンをクリックします。

    ![モーダルウィンドウの右下にある[Add]ボタンをクリックします。](./page-versioning/images/04.png)

3.  新しいバリエーションの*名前*と*説明*を入力します。 これらのフィールドは、バリエーションに合わせていつでも変更できます。

    ![新しいバリエーションの名前と説明を入力します。](./page-versioning/images/05.png)

    ページセットバリエーションの場合、次のオプションから選択して、新しいページセットバリエーションが既存のバリエーションからページをコピーするかどうかを決定することもできます。

      - **すべてのサイトページバリエーション**：既存のすべてのページバリエーションを新しいページセットバリエーションにコピーします。

      - **なし（空のサイトページバリエーション）**：新しい空のページセットバリエーションを作成します。

      - **\[Existing Variations\]**：単一のページセットバリエーションからすべての既存のページバリエーションをコピーします。

    ![新しいページセットのバリエーションが既存のバリエーションからページをコピーするかどうかを決定します](./page-versioning/images/06.png)

    ```{note}
    If you decide to copy existing Page variations into your new Page set variation, only the latest version marked as ready for publishing is copied.
    ```

4.  *[Add]* をクリックして新しいバリエーションを作成します。

作成したら、ステージングバーのドロップダウンメニューから、ページまたはページセットの各バージョンを切り替えることができます。

![ステージングバーのドロップダウンメニューから、ページまたはページセットの各バージョンを切り替えることができます。](./page-versioning/images/02.png)

## バリエーションのマージ

2つのページセットバリエーションをマージできます。 マージにより、コンテンツに影響を与えたり上書きしたりすることなく、ページとページバリエーションがページセットのバリエーションに追加されます。

1.  ステージング バーの*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックし、[サイトページバリエーション]を選択します。

    ![[サイトページバリエーション]を選択します。](./page-versioning/images/07.png)

2.  マージのベースとして使用するバリエーションの*アクション*ボタン（ ![Actions button](../../../images/icon-actions.png) ）をクリックし、*[マージ]* を選択します。

    ![マージのベースとして使用するバリエーションのアクションボタンをクリックし、[マージ]を選択します。](./page-versioning/images/08.png)

3.  ベースとなるバリエーションの上にマージするバリエーションを選択します。

    ![ベースとなるバリエーションの上にマージするバリエーションを選択します。](./page-versioning/images/09.png)

サイトページの2つのバリエーションがマージされると、ベースとなるバリエーションに存在しない新しいページが追加されます。 また、ページが両方のバリエーションで存在し、ページの少なくとも1つのバージョンが公開の準備ができているとマークされている場合、準備ができているとマークされた最新バージョンが、ベースとなるバリエーションの対応するページの新しいバリエーションとして追加されます。 公開の準備ができているとマークされていない古いバリエーションはコピーされません。

## バリエーション権限の管理

各バリエーションに権限を設定して、特定のユーザーがすべてのバリエーションではなく一部のバリエーションを管理できるようにすることもできます。 詳細は、[ステージング権限の管理](./managing-staging-permissions.md)を参照してください。

## 追加情報

  - [Staging Overview](../staging.md)
  - [Configuring Local Live Staging](./configuring-local-live-staging.md)
  - [Configuring Remote Live Staging](./configuring-remote-live-staging.md)
  - [Staging UI Reference](./staging-ui-reference.md)
