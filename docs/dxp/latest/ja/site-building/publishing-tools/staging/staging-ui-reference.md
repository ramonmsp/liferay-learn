# ステージングUIリファレンス

サイトでローカルまたはリモートの本番環境ステージングを有効にすると、ほとんどのページ設定オプションはステージング環境でのみアクセス可能になります。 これにより、ユーザーは本番環境ページを直接編集できなくなります。

また、ステージングを有効にすると、ステージング環境で追加のオプションにアクセスできます。 これらのオプションは、*ステージング バー*、*[本番環境に公開]* メニュー、および*ステージングページ*にあります。

  - [ステージング バー](#staging-bar)
  - [本番環境に公開](#publish-to-live)
  - [ステージングページ](#staging-page)

## ステージング バー

サイトのステージングが有効になっている場合、サイトの各ページのステージングバーから追加のオプションにアクセスできます。 このバーでは、ステージング環境と本番環境を切り替えたり、ステージングされたページの*[本番環境に公開]* をクリックしたりすることができます。

![サイトのステージングが有効になっている場合、サイトの各ページのステージングバーにアクセスできます。](./site-staging-ui-reference/images/02.png)

ステージングバーを介して、ステージング環境のウィジェットページの次のオプションにアクセスすることもできます。

  - **サイトページバリエーション**：ドロップダウンメニューを使用して、ステージングされたサイトのページセットのバリエーションを切り替えることができます。 ステージングバーの*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックし、*[サイトページバリエーション]* を選択して、ページセットのバリエーションを管理および作成することもできます。 詳細は、[Page Versioning](./page-versioning.md)を参照してください。

  - **ページバリエーション**：ドロップダウンメニューを使用して、ステージングされたサイトの単一ページのバリエーションを切り替えることができます。 ステージングバーの*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックし、*[ページバリエーション]* を選択して、ページバリエーションを管理および作成することもできます。 詳細は、[Page Versioning](./page-versioning.md)を参照してください。

  - **[Undo/Redo]**：ステージングバーの*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックし、*[Undo*/*Redo]* を選択すると、ページへの最近の変更を元に戻すか、やり直すことができます。 ページを*[Ready for Publish Process]* とマークした後は、最近の変更を元に戻したり、やり直したりすることはできません。

  - **履歴**：ステージングバーの*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックして*[履歴]* を選択すると、ページ改訂履歴を表示および管理できます。 ここから、復元するページバージョンの*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックし、*[Mark as Ready for Publishing Process]* を選択して、ページを以前のバージョンに戻すこともできます。

  - **Ready for Publish Process**：変更を完了したら、*[Ready for Publish Process]* をクリックして、ページのステータスを*[下書き]* から*[Ready for Publish Process]* に変更します。 次に、*[本番環境に公開]* をクリックして、変更の公開を設定および開始できます。 ページを本番環境に公開すると、*[Ready for Publish Process]* とマークされたバージョンのみが公開されます。

## 本番環境に公開

*[本番環境に公開]* をクリックすると、公開プロセスを設定するための追加オプションを含むモーダルウィンドウが表示されます。 *[Simple]* または*[詳細設定]* 設定を使用して公開できます。

![[本番環境に公開]をクリックして、公開モーダルウィンドウにアクセスします。](./site-staging-ui-reference/images/03.png)

## シンプルな公開

**Name**：公開プロセスのわかりやすい名前を*[Name]* フィールドに入力します。

**Changes Since Last Publish Process**：最後の公開プロセス以降に行われたステージングされた変更を表示します。

**公開するページ**：現在の公開プロセスに含まれるページ数を表示します。

```{note}
This displays the number of Page deletions tracked by the Staging framework. Keep in mind that this number counts the Page deletions on the Staging Site, not how many Pages will be deleted on the on the Live Site. There could be an inconsistency between the number of Page deletions to be published and the actual number of Pages present on either of the Staging and Live Sites.
```

準備ができたら、*[本番環境に公開]* をクリックして公開を開始します。

![[本番環境に公開]をクリックして、公開を開始します。](./site-staging-ui-reference/images/04.png)

## 高度な公開

高度な公開を使用すると、公開プロセスをカスタマイズするために使用できる情報と設定にアクセスできます。 *[カスタム]* タブでは、コンテンツ、日付、ページなどを指定できます。 または、*[公開テンプレート]* タブをクリックして、公開プロセス用に事前設定されたテンプレートを選択します。 詳細設定にアクセスするには、モーダルウィンドウで*[Switch to Advanced Publish Process]* をクリックします。

![詳細設定を使用して、公開プロセスをカスタマイズします。](./site-staging-ui-reference/images/05.png)

カスタムの詳細設定は、次のセクションに分かれています。

**Name**：公開プロセスのわかりやすい名前を*[Name]* フィールドに入力します。

**日付**：変更をすぐに公開するか、 後で公開するように*スケジュール*するかを選択します。 また、公開プロセスを繰り返すかどうか、および繰り返す頻度を決定することもできます。

![変更をいつ公開するかを選択します。](./site-staging-ui-reference/images/06.png)

**Deletions**：*インポートする前にアプリケーションデータを削除する*かどうか、および*個々の削除を複製する*かどうかを選択します。

![インポートする前にアプリケーションデータを削除するかどうか、および個々の削除を複製するかどうかを選択します。](./site-staging-ui-reference/images/07.png)

**Pages**：公開するページセットのバリエーションと個々のページ、および選択したページのルックアンドフィールを選択します。 *行方不明ページを削除する*かどうかを選択することもできます。選択すると、ステージングサイトに存在しないすべてのページが本番環境サイトから削除されます。  [Pages]メニューから公開するページを選択すると、ウィジェットとその参照が常に公開されます。

![公開するページセットのバリエーションと個々のページ、および選択したページのルックアンドフィールを選択します。](./site-staging-ui-reference/images/08.png)

カスタムテーマを使用してページを公開する場合は、ステージング設定の*[ルック&フィール]見出しの下にある[テーマ設定]オプションをオンにする必要があります。 それ以外の場合は、デフォルトのテーマが適用されます。</p>

**コンテンツ**：公開プロセスに含めるコンテンツを選択します。 選択したタイプの*すべての*コンテンツを公開するか、日時のパラメーターを指定して公開されるコンテンツを制限できます。 また、コンテンツタイプごとに*[Change]* をクリックして、*バージョン履歴*、*ボキャブラリ*、*プレビューとサムネイル表示*など、各タイプに含まれるアイテムやその他の設定を管理することもできます。 詳細は、[ステージングでのデータとコンテンツタイプの管理](./managing-data-and-content-types-in-staging.md)を参照してください。

![公開プロセスに含めるコンテンツを選択します。](./site-staging-ui-reference/images/09.png)

**権限設定**：変更が公開されたときにページとウィジェットの権限を含めるかどうかを選択します。

![変更が公開されたときにページとウィジェットの権限を含めるかどうかを選択します。](./site-staging-ui-reference/images/10.png)

ページまたはコンテンツを公開するたびに詳細オプションを手動で設定する代わりに、ステージング設定を[*公開テンプレート*](#publish-templates)として保存して、今後も使用できるようにすることができます。 公開プロセス用に保存されたテンプレートを表示および選択するには、*[公開テンプレート]* タブをクリックします。

![公開プロセス用に保存されたテンプレートを表示および選択するには、[公開テンプレート]タブをクリックします。](./site-staging-ui-reference/images/11.png)

準備ができたら、*[本番環境に公開]* をクリックして公開を開始します。

## ステージングページ

ステージングを有効にすると、*[公開設定]* タブから使用できるオプションが変更されます。 本番環境では、*エクスポート*機能にのみアクセスできます。 ステージング環境では、*インポート*および*ステージング*機能にのみアクセスできます。

ステージングページの新しいオプション（公開*プロセス*の表示、*公開テンプレート*の作成と管理、サイトのステージングの変更または無効化）にアクセスすることもできます。

![ステージングページで新しいオプションにアクセスすることもできます。](./site-staging-ui-reference/images/13.png)

### 以前および将来の公開プロセス

ステージングを使用して公開すると、*プロセス*としてキャプチャされ、後で参照できるように保存されます。 これらのプロセスを表示および管理するには、*[プロダクトメニュー]* → *[公開設定]* → *[ステージング]* に移動します。

*[プロセス]* タブには、完了したステージングプロセスのリストがあります。 ここから、プロセスの*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックして、以前のパブリケーションの*概要*を*再開*、*クリア*、または表示できます。

![ステージングページから以前の公開プロセスを表示および管理します。](./site-staging-ui-reference/images/14.png)

*追加* （![Add button](../../../images/icon-add.png)）ボタンをクリックして、カスタム設定または事前定義された公開テンプレートを使用して新しい公開プロセスを作成することもできます。

*[予定済み]* タブでは、すべての予定済みの公開プロセスを表示できます。

### 公開テンプレート

同様のステージング設定を定期的に作成する場合は、独自の*公開テンプレート*を作成して時間を節約できます。 テンプレートを作成するには、*ステージング*ページの*[アプリケーション]* バーで*アクション*ボタン（ ![Actions button](../../../images/icon-actions.png) ）をクリックします。 次に、*[公開テンプレート]* を選択します。

![ステージングページのアプリケーションバーにあるアクションボタンをクリックします。](./site-staging-ui-reference/images/15.png)

ここから、頻繁に公開する設定のテンプレートを作成および管理できます。 次に、*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックして*[公開]* を選択すると、テンプレートを使用できます。

![頻繁に公開する設定のテンプレートを作成および管理します。](./site-staging-ui-reference/images/16.png)

ステージングバーの*[本番環境に公開]* ボタンを使用してページまたはコンテンツを公開するときにテンプレートを使用することもできます。 詳細は、[Advanced Publishing](#advanced-publishing)を参照してください。

### ステージング設定

ステージングを設定した後、*ステージング*ページの*[アプリケーション]* バーにある*アクション*ボタン（![Actions button](../../../images/icon-actions.png)）をクリックすると、ステージング設定ページにアクセスできます。  次に、*[ステージング設定]* を選択します。

![ステージングページのアプリケーションバーにあるアクションボタンをクリックして、ステージング設定にアクセスします。](./site-staging-ui-reference/images/17.png)

ここから、サイトのステージングを無効にしたり、[[ページバージョニング]](page-versioning.md)設定を変更したりできます。 ただし、*[ステージコンテンツ]* オプションは、初期設定後に変更することはできません。

## 追加情報

  - [Staging Overview](../staging.md)
  - [公開プロセスを理解する](./understanding-the-publishing-process.md)
  - [Page Versioning](./page-versioning.md)
  - [ステージングでのデータとコンテンツタイプの管理](./managing-data-and-content-types-in-staging.md)
