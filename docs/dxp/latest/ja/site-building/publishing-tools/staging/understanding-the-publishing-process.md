# 公開プロセスを理解する

公開設定は、サイトのページ、コンテンツ、およびアプリケーションの設定がステージングから本番環境に転送されるプロセスです。 このプロセスを理解すると、効率が向上し、シームレスな公開エクスペリエンスを実現するための事前の計画に役立ちます。

  - [ステージングプロセス](#the-staging-process)
  - [ステージングのための事前計画](#planning-ahead-for-staging)

## ステージングプロセス

下位の観点からは、ステージングは2つのサイト間の関係であり、ローカルサイトの同じエンティティが別のサイトにミラーリングされます。 高度な観点からは、ステージングには、エクスポート、検証、およびインポートの3つの連続したフェーズで実行される公開プロセスが含まれます。

### エクスポートフェーズ

エクスポート中に、公開設定が処理され、必要な参照エンティティが収集されます。 次に、すべてがインスタンス独自のファイル形式に処理され、ローカルに保存されるか、リモート本番環境のDXPインスタンスに転送されます。

### 検証フェーズ

検証中に、すべてがチェックされ、インポートプロセスを開始できるかどうかが判断されます。 これには、ファイルのバージョンと整合性の確認、追加のシステム情報（言語設定など）の確認、ファイルが欠落しているコンテンツを参照していないかどうかの確認が含まれます。

公開プロセス中に何も検証されない場合、トランザクションデータベースはサイトを元の状態に戻し、現在の公開プロセスを破棄します。 これは、他の方法で適切に設計された本番環境サイトを破壊する可能性のある不完全な情報の公開を防ぐために必要なアクションです。

ただし、ドキュメントライブラリのファイルシステムがデータベース（たとえば、[DBStore](../../../system-administration/file-storage/other-file-store-types/dbstore.md)）に保存されていない場合、それはトランザクションではないので、ステージングに失敗しても元には戻されません。 これにより、ファイルとデータベース内のファイルの参照との間に不一致が生じる可能性があります。 データの整合性を維持するには、ドキュメントライブラリをステージングする前に、データベースとファイルシステムの両方の定期的なバックアップが維持されていることを確認してください。

### インポートフェーズ

インポート中に、公開パラメーターに従って、サイトのコンテンツ、レイアウト、およびアプリに必要な更新または追加が行われます。 すべてが検証されて正しい場合、ステージコンテンツは本番環境サイトに公開されます。

## ステージングのための事前計画

ステージングは、柔軟性と拡張性を備えた複雑なサブシステムです。 サイトで使用する前に、事前に計画を立て、シームレスなプロセスのためのいくつかのヒントを覚えておくことが重要です。 評価するいくつかの要素があります。

### コンテンツの種類

サイトのコンテンツに応じて、初期設定時に必要なコンテンツの種類に対してのみステージングをオンにすることができます。 特定の種類のコンテンツのみを含めるように公開プロセスを設定することもできます。 これらの対策は両方とも、不要な作業を回避するのに役立ちます。

### ハードウェア環境

コンテンツの種類に応じて環境を計画します。 サイトで大きな画像やビデオファイルを扱う場合は、共有ネットワークドライブが最適なオプションかどうかを判断してください。 ドキュメントライブラリに多くの大きな画像を保存するには、通常、より高速なネットワークまたはローカルストレージが必要です。 ただし、Webコンテンツであれば、通常は容量が小さくディスク領域をほとんど占有しません。

### ステージング環境のカスタマイズとカスタムロジック

組織のビジネスロジックはアプリに実装されている可能性が高く、そのアプリのステージングをサポートする場合は、そのためのコードを作成する必要があります。 ステージング環境のルックアンドフィールを変更する場合は、新しいJSPコードを記述してデフォルトのUI設定を変更することも検討できます。

### 公開設定の待ち時間

サイト作成の開始時にステージングを有効にして、実行に時間がかかる巨大な公開処理を避けることができます。 小規模で段階的な変更のほうが、大規模に再構築するよりもはるかにパフォーマンスが高くなります。

### JVM/ネットワーク構成

ステージングでは、JVM /ネットワークは最低4GBのメモリと20MB/秒の転送速度（ディスク）で構成する必要があります。

## 追加情報

  - [Configuring Local Live Staging](./configuring-local-live-staging.md)
  - [Configuring Remote Live Staging](./configuring-remote-live-staging.md)
